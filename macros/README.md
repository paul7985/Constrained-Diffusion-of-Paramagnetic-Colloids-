# ImageJ Macros for Data Extraction

This section explains how to use **ImageJ** to convert raw data (videos) into **x, y, t coordinates** saved in a `.csv` file, which can then be analyzed with MATLAB scripts.  
The macro **`macro_movie_Paul.ijm`** was written specifically for this project to make the process faster and more flexible.

---

## üõ† Features of the Macro

- Automates processing of multiple files in sequence (ideal for overnight runs).  
- Allows selection of output directory for saving `.csv` files.  
- Compatible with **ImageJ version with all plugins** (`ImageJ-win64.exe - Raccourci` on desktop).  

---

## ‚ñ∂Ô∏è How to Run the Macro

1. Launch ImageJ via the shortcut:  
   **`ImageJ-win64.exe - Raccourci`** (preconfigured with all required plugins).  

2. Open the macro:  
   `Plugins ‚Üí Macros ‚Üí Run ‚Üí select macro_movie_Paul.ijm`

3. Choose (or create) the folder where the `.csv` file will be saved.  
   - The filename depends on the measurement name initially given via **Micro-Manager**.  

4. Specify the **number of files** to process.  
   - ‚ö†Ô∏è The macro currently saves all processed files in the same folder.  
   - If you need multiple output folders, you‚Äôll need to edit the macro.

5. Select the folder containing the images.  
   - The last folder should be named **`Pos0`** (automatically generated by Micro-Manager).  
   - No images will appear in the window at this stage ‚Äî just click **Select**.

6. The macro should now run automatically.

---

## üí° Tips for Adjusting Parameters

To test and adjust filtering parameters, use **`macro_test.ijm`**, a simplified version of the main macro:

- Contains only the **filtering process** (no saving, no folder selection, no batch processing).  
- Useful to test image preprocessing steps before applying them to the full dataset.  

### Workflow with `macro_test.ijm`

1. Open the test macro:  
   `File ‚Üí Open ‚Üí select macro_test.ijm`

2. Modify filtering parameters directly in the code:  
   - **`area`** ‚Üí particle size to filter.  
   - **`method`** ‚Üí filtering method (default: **Phansalkar**, used in all experiments).  

3. Load a sample image:  
   `File ‚Üí Open ‚Üí select an image from your dataset`.

4. Run the macro on the open image:  
   - In the Java window containing `macro_test.ijm`, click **Run**.  
   - To avoid reopening images repeatedly, duplicate it first (`Ctrl+D`) and apply the macro multiple times.

5. Once parameters are tuned, transfer them into **`macro_movie_Paul.ijm`**:  
   - Open `macro_movie_Paul.ijm` in the same way.  
   - Update parameters, save, and rerun.

---

‚ú® With this workflow, you can:  
- Extract trajectories efficiently in batch.  
- Fine-tune filtering for optimal detection.  
- Seamlessly transition from raw videos ‚Üí CSV ‚Üí MATLAB analysis.
